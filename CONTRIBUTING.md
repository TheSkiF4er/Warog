# Руководство по участию в развитии Warog

Спасибо за интерес к проекту **Warog**!  
Этот документ описывает правила и рекомендации для участников, которые хотят помогать в развитии фреймворка.

- Проект: **Warog** — современный JavaScript-фреймворк.
- Версия: **1.0.0**
- Автор / основной мейнтейнер: **TheSkiF4er**
- Лицензия: **Apache 2.0**

Мы стремимся к тому, чтобы вклад в Warog был максимально прозрачным, предсказуемым и удобным как для новых участников, так и для постоянных контрибьюторов.

---

## 1. Кодекс поведения

Участие в проекте регулируется отдельным файлом:

- [`CODE_OF_CONDUCT.md`](./CODE_OF_CONDUCT.md)

Ключевые принципы:

- взаимоуважение;
- отсутствие дискриминации и оскорблений;
- конструктивное обсуждение технических вопросов;
- готовность к обратной связи и ревью.

Любые нарушения кодекса поведения могут привести к блокировке участия в проекте.

---

## 2. Как задать вопрос или предложить идею

Перед тем как создавать Issue или Pull Request:

1. Ознакомьтесь с:
   - [`README.md`](./README.md) — обзор проекта;
   - [`CHANGELOG.md`](./CHANGELOG.md) — список изменений;
   - [`SECURITY.md`](./SECURITY.md) — политика безопасности.

2. Убедитесь, что ваш вопрос или проблема ещё не обсуждались:
   - проверьте открытые и закрытые Issues;
   - поищите по ключевым словам.

3. Если вопрос всё ещё актуален:
   - создайте **Issue** с понятным заголовком;
   - постарайтесь описать контекст: что вы делали, чего ожидали, что получили.

---

## 3. Способы участия

Вы можете помочь проекту несколькими способами:

- Сообщать о багах;
- Улучшать документацию;
- Предлагать новые фичи;
- Оптимизировать производительность;
- Добавлять тесты (unit/integration/e2e);
- Улучшать DX (утилиты, скрипты, tooling).

Любой вклад, даже небольшой (исправление опечатки в README) — важен.

---

## 4. Архитектура репозитория (кратко)

Проект использует структуру **monorepo** на базе `pnpm workspaces`:

- `packages/core` — ядро рантайма (`@warog/core`);
- `packages/compiler` — базовый компилятор (`@warog/compiler`);
- `packages/runtime-client` — клиентский рантайм и адаптеры (`@warog/runtime-client`);
- `packages/server-adapters/node` — серверный адаптер Node.js (`@warog/server-adapter-node`);
- `packages/components` — примитивные компоненты (`@warog/components`);
- `examples/hello-warog` — пример приложения;
- `tooling/dev-utils/scripts` — скрипты для разработки и CI;
- корень (`package.json`, `pnpm-workspace.yaml`, конфиги TS/ESLint/Prettier, CI и т.д.).

Перед тем как предлагать изменения, желательно понимать, в каком пакете логичнее разместить ваш код.

---

## 5. Требования к окружению

Рекомендуемая конфигурация для разработки:

- Node.js: **≥ 20.x**
- pnpm: **≥ 9.x**
- TypeScript: используется через локальный `devDependency`.

Шаги для локального запуска проекта:

```bash
# клонирование репозитория
git clone <url-репозитория> warog
cd warog

# установка зависимостей
pnpm install

# сборка всех пакетов
pnpm build

# запуск тестов
pnpm test
````

Для работы с примером:

```bash
cd examples/hello-warog
pnpm dev
```

---

## 6. Работа с Issues

### 6.1. Сообщение о баге

При создании Issue с багом:

* используйте шаблон `bug_report`, если он присутствует;
* опишите:

  * версию Node.js;
  * ОС;
  * шаги воспроизведения;
  * ожидаемое поведение;
  * фактическое поведение;
  * если возможно — минимальный пример кода.

Если баг связан с безопасностью, **НЕ** создавайте публичный Issue — следуйте инструкции в [`SECURITY.md`](./SECURITY.md).

### 6.2. Запрос фичи

Для предложений по новым возможностям:

* опишите проблему/задачу, а не только решение;
* укажите, в каком пакете (или нескольких) вы видите изменение;
* оцените, как изменение влияет на:

  * производительность;
  * DX (удобство для разработчика);
  * обратную совместимость.

---

## 7. Как подготовить Pull Request

### 7.1. Форк и ветка

Стандартный процесс:

1. Сделайте форк репозитория.
2. Создайте ветку от `main`:

   ```bash
   git checkout -b feature/<краткое-описание>
   ```

   Примеры:

   * `feature/add-core-lens`
   * `fix/runtime-client-router-bug`
   * `docs/update-readme-ru`

### 7.2. Изменения и стиль кода

Общие требования:

* Используйте **TypeScript** для всех новых модулей.
* Соблюдайте стиль, заданный:

  * `tsconfig.base.json`
  * `.eslintrc.cjs`
  * `.prettierrc`

Перед коммитом:

```bash
pnpm lint   # если пакет поддерживает lint
pnpm build  # убедитесь, что сборка проходит
pnpm test   # запускайте тесты в модуле, который меняете (и, по возможности, во всём репо)
```

Если вы изменяете конкретный пакет, можно ограничиться его скриптами, например:

```bash
cd packages/core
pnpm build
pnpm test
```

### 7.3. Коммиты

Рекомендуемый формат сообщений коммитов (не строго обязательный, но приветствуется):

* `feat(core): добавлен новый API signalOnce`
* `fix(runtime-client): исправлена навигация router-adapter`
* `docs: обновлён README для examples/hello-warog`
* `chore: обновлён tsconfig.base.json`

Желательно:

* один логический набор изменений — один PR;
* избегайте «суперкоммитов», изменяющих всё сразу без необходимости.

### 7.4. Перед отправкой PR

Проверьте чеклист:

* [ ] Изменения локально собираются (`pnpm build`).
* [ ] Тесты проходят (`pnpm test` или тесты конкретного пакета).
* [ ] Код отформатирован (Prettier / ESLint).
* [ ] Обновлён `README.md`, если добавлен новый публичный API.
* [ ] При необходимости обновлён `CHANGELOG.md` (в секции unreleased или с комментариями к PR).

---

## 8. Приём Pull Request’ов

Мейнтейнеры при просмотре PR обращают внимание на:

1. **Корректность и безопасность**

   * отсутствие очевидных уязвимостей;
   * корректная работа с пользовательским вводом;
   * отсутствие прямой вставки непроверенного HTML.

2. **Производительность**

   * отсутствие ненужных аллокаций в горячих путях;
   * минимальный runtime overhead;
   * стабильность размера бандлов (по возможности не увеличивать критически важные части).

3. **Соответствие архитектуре Warog**

   * изменения в ядре (`@warog/core`) и компиляторе (`@warog/compiler`) должны быть максимально аккуратными;
   * новое поведение/фичи должны вписываться в концепцию minimal runtime + artefact-based подход.

4. **Поддерживаемость**

   * читаемость кода;
   * комментарии там, где логика нетривиальна;
   * адекватный охват тестами.

Возможные результаты:

* PR принимается с минимальными замечаниями;
* мейнтейнер просит доработать PR;
* PR может быть отклонён, если не соответствует целям проекта.

---

## 9. Документация

Если вы добавляете новое поведение или публичный API:

* обновите соответствующий `README.md` в пакете (например, `packages/core/README.md`);
* при необходимости добавьте пример в `examples/`;
* при крупных/концептуальных изменениях — предложите правки в корневой `README.md`.

Документация должна:

* быть понятной и лаконичной;
* содержать минимальные рабочие примеры (по возможности);
* быть согласованной с существующим стилем проекта.

---

## 10. Тестирование

### 10.1. Unit-тесты

* Новые модули или сложная логика должны сопровождаться unit-тестами.
* Простые заглушки `tests/run-tests.cjs` можно постепенно заменять полноценными тестами (например, Jest/Vitest).

### 10.2. Интеграционные тесты

* Если вы меняете связку `@warog/core` + `@warog/runtime-client` + `@warog/server-adapter-node`, имеет смысл добавить интеграционный тест, который проверяет поведение end-to-end.

### 10.3. Регрессии

* Если PR фиксит баг — постарайтесь добавить тест, который воспроизводит ошибку до фикса и проходит после.

---

## 11. Безопасность

Кратко:

* Не публикуйте детали уязвимости в открытых Issue.
* Следуйте правилам из [`SECURITY.md`](./SECURITY.md).
* При внесении изменений в области:

  * SSR, сериализация/десериализация;
  * server actions / адаптеры;
  * обработка пользовательского ввода;
    будьте особенно внимательны.

---

## 12. Лицензия вкладов

Вклады в проект Warog принимаются на условиях лицензии:

* **Apache 2.0**

Создавая Pull Request, вы соглашаетесь, что ваш код будет распространяться в рамках этой лицензии и что вы имеете право на такой вклад (вы являетесь автором, либо имеете разрешение автора/работодателя).

---

## 13. С чего лучше начать

Рекомендуемый путь для новых участников:

1. Ознакомиться с `README.md` и `packages/core/README.md`.
2. Найти в Issues задачи уровня:

   * `good first issue`
   * `help wanted`
3. Начать с:

   * улучшения документации;
   * небольших фиксов в `@warog/core` или `@warog/runtime-client`;
   * добавления тестов к уже существующему коду.

Если вы сомневаетесь, с чего начать — создайте Issue с заголовком `Хочу помочь, с чего начать?` и кратко опишите свои навыки.

---

Спасибо, что хотите сделать Warog лучше.
Любой ваш вклад — это вклад в развитие открытого и производительного JavaScript-мира.
