# Политика безопасности проекта Warog

Этот документ описывает подход к безопасности проекта **Warog**, а также порядок
сообщения об уязвимостях и обработки инцидентов безопасности.

Проект находится в активной разработке и распространяется под лицензией **Apache 2.0**.  
Автор и основной мейнтейнер: **TheSkiF4er**.

---

## Поддерживаемые версии

На данный момент единственной официально поддерживаемой стабильной версией является:

- `1.0.0` — текущий стабильный релиз.

Все отчёты об уязвимостях, относящиеся к версии `1.0.0` и к ветке разработки `main`,
рассматриваются в приоритетном порядке.

---

## Как сообщить об уязвимости

Если вы считаете, что обнаружили уязвимость в **Warog** или в одном из его пакетов:

1. **Не создавайте публичный Issue в GitHub**, не публикуйте детали уязвимости в открытых каналах.
2. Отправьте приватное сообщение мейнтейнеру по электронной почте:

   - `security`-контакт (пример):  
     **security@cajeer.ru**.

3. В письме постарайтесь указать следующее:
   - краткое описание уязвимости;
   - шаги для воспроизведения (по возможности — воспроизводимый пример);
   - предполагаемое влияние (например: XSS, RCE, утечка данных, DoS и т.д.);
   - затронутые версии (`1.0.0`, ветка `main`, конкретные пакеты `@warog/*`);
   - любую дополнительную информацию (логи, скриншоты, PoC-код), которую можно безопасно предоставить.

4. Если у вас есть возможность, **по возможности не прилагайте эксплойт-код**, который может быть опасен
   при случайном запуске. Достаточно детального описания и/или псевдокода.

Мы подтверждаем получение отчёта в разумные сроки и постараемся держать вас в курсе статуса.

---

## Как мы обрабатываем отчёты о безопасности

Обычно процесс обработки уязвимостей выглядит следующим образом:

1. **Подтверждение получения отчёта**
   - В течение нескольких рабочих дней (обычно 72 часов) мы подтверждаем, что получили ваше сообщение.

2. **Валидация уязвимости**
   - Проводим анализ и пытаемся воспроизвести проблему.
   - Если уязвимость не подтверждается, мы объясняем, почему, и можем попросить дополнительную информацию.

3. **Классификация и приоритизация**
   - Оцениваем серьёзность (примерно по уровням: Low / Medium / High / Critical).
   - Определяем, какие компоненты и версии затронуты.

4. **Разработка и тестирование исправления**
   - Готовим патч, добавляем тесты, проверяющие проблему.
   - Проверяем, что патч не ломает обратную совместимость без необходимости.

5. **Подготовка релиза и координированное раскрытие**
   - Выпускаем исправление (мини- или патч-релиз, например `1.0.1`).
   - В `CHANGELOG.md` и/или в релиз-нотах кратко описываем характер уязвимости (без лишних деталей, которые
     можно использовать в качестве готового эксплойта).
   - При необходимости можем согласовать с вами время публичного раскрытия (coordinated disclosure).

6. **Благодарность репортёру**
   - По вашему желанию можем указать вас в качестве репортёра в `SECURITY.md`, `CHANGELOG.md` или релиз-нотах.

---

## Диапазон / область ответственности

Проект **Warog** включает следующие части:

- пакеты `@warog/core`, `@warog/compiler`, `@warog/runtime-client`,
  `@warog/server-adapter-node`, `@warog/components` и другие пакеты в `packages/`;
- примеры и демо-приложения в `examples/`;
- утилиты и скрипты в `tooling/`.

Мы принимаем отчёты об уязвимостях, связанных с:

- нарушением конфиденциальности, целостности или доступности приложений, использующих Warog;
- XSS, CSRF, инъекциями (SQL, Command, Template и пр.), обходом аутентификации или авторизации;
- нарушением инвариантов безопасной сериализации/десериализации артефактов;
- SSR/SSG проблемами, ведущими к утечке чувствительных данных;
- нарушениями безопасности в серверных адаптерах (Node.js, и т.п.);
- ошибками, позволяющими выполнять произвольный код или обходить ограничения исполнения.

Что **обычно не считается** уязвимостью (если только не указано иное):

- проблемы, вызванные неправильной конфигурацией окружения пользователем;
- использование небезопасных настроек, явно помеченных как `experimental` или `unsafe`;
- уязвимости в сторонних библиотеках, которые Warog лишь использует косвенно — в этом случае
  мы можем помочь с обновлением зависимостей, но корневой репорт следует направлять в соответствующий проект;
- атаки социальной инженерии, фишинг, компрометация сторонних сервисов и аккаунтов, не относящихся к Warog.

---

## Рекомендации по безопасному использованию Warog

При разработке приложений на Warog рекомендуется:

1. **Следовать принципу минимальных привилегий**
   - Не предоставлять компонентам и модулям больше доступа, чем необходимо (особенно при конфигурации
     серверных адаптеров и server actions).

2. **Осторожно работать с пользовательским вводом**
   - Не доверять входным данным (query-параметры, тела запросов, заголовки и т.д.).
   - Использовать проверку и валидацию данных до передачи в бизнес-логику и шаблоны.

3. **Использовать HTTPS и актуальные версии Node.js/браузеров**
   - Не запускать production-приложения поверх устаревших рантаймов и без шифрования.

4. **Избегать прямой вставки непроверенного HTML**
   - Не использовать небезопасные конструкции вроде `innerHTML` без ясной необходимости.
   - При использовании API Warog для работы с HTML — избегать передачи пользовательского ввода напрямую в разметку.

5. **Регулярно обновлять зависимости**
   - Следить за новыми релизами Warog и сторонних пакетов.
   - Обновлять патч-версии (1.0.x) для получения исправлений безопасности.

---

## Отчёты о безопасности в примерах и документации

Если вы обнаружили проблему безопасности:

- в примерах (`examples/*`),
- в документации,
- в демонстрационном коде,

это **тоже важно**. Пожалуйста, сообщайте об этом тем же приватным каналом, что и про уязвимости в core-пакетах.
Такие проблемы могут не влиять напрямую на runtime, но способны вводить пользователей в заблуждение
и побуждать их к небезопасным практикам.

---

## Благодарности и признание

Мы высоко ценим любые усилия по улучшению безопасности Warog.

Если вы нашли уязвимость и ответственно сообщили о ней, вы можете (по желанию):

- быть упомянуты в разделе «Безопасность» `CHANGELOG.md` или релиз-нотах;
- быть добавлены в список благодарностей в `README.md` или `SECURITY.md`.

Если вы не хотите публичного упоминания, просто укажите это в своём отчёте.

---

## Отказ от гарантий

Проект **Warog** распространяется «как есть» (**AS IS**) в соответствии с лицензией **Apache 2.0**.
Авторы и мейнтейнеры не несут ответственности за любой ущерб, прямой или косвенный, возникший
в результате использования этого программного обеспечения.

Тем не менее, мы стремимся оперативно и качественно реагировать на сообщения об уязвимостях
и повышать уровень безопасности проекта и приложений, построенных на Warog.

---

Спасибо за ваш вклад в безопасность Warog.  
Любая обратная связь по этому документу также приветствуется.
