# Changelog

Все заметные изменения в этом проекте будут документироваться в этом файле.

Формат основан на принципах [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/).  
Версияing: [SemVer](https://semver.org/lang/ru/).

---

## [1.0.0] — 2025-12-11

Первый публичный релиз **Warog** — современного JavaScript-фреймворка с акцентом на высокую производительность, минимальный рантайм и простоту разработки.

### Добавлено

#### Архитектура монорепозитория

- Структура монорепозитория с использованием `pnpm workspaces`:
  - `packages/*` — основные пакеты фреймворка;
  - `examples/*` — демонстрационные приложения;
  - `tooling/*` — утилиты и скрипты для разработки.
- Базовая конфигурация проекта:
  - `package.json` в корне с общими скриптами (`bootstrap`, `build`, `test`, `ci`);
  - `pnpm-workspace.yaml` с описанием workspace;
  - `.gitignore`, `.editorconfig`, `.eslintrc.cjs`, `.prettierrc`, `tsconfig.base.json`.

#### Ядро фреймворка — `@warog/core`

- Реализовано минимальное, но функциональное ядро рантайма:
  - `Signal<T>` — класс реактивного состояния с подписчиками;
  - `signal(initial)` — удобный конструктор сигналов;
  - `effect(fn)` — простая модель побочных эффектов с поддержкой очистки;
  - `schedule(task)` — микро-задачный планировщик для батчинга обновлений.
- Простые, но полезные утилиты сериализации:
  - `serializeSignals(obj)` — JSON-сериализация значений сигналов;
  - `deserializeSignals(json)` — десериализация сохранённого состояния.
- Базовый тест-раннер (заглушка) `tests/run-tests.cjs` для быстрой интеграции с CI.
- Документация пакета: `packages/core/README.md`.

#### Компилятор — `@warog/compiler`

- Добавлен базовый интерфейс компилятора `.wg.tsx` → артефакты:
  - Интерфейс `CompileResult` (HTML, artifact JSON, clientModule JS).
  - Функция `compileSource(source)`:
    - генерирует HTML-обёртку с контейнером `#app`,
    - создаёт JSON-артефакт состояния (пока пустой),
    - генерирует минимальный клиентский модуль-заглушку.
- Технический README `packages/compiler/README.md`.
- Тест-раннер заглушка `tests/run-tests.cjs` для CI.

#### Клиентский рантайм — `@warog/runtime-client`

- Создан модуль клиентского рантайма с адаптерами:
  - `dom-adapter.ts` — монтирование Warog-приложения в DOM:
    - проверка наличия root-элемента;
    - отметка `data-warog-mounted` для диагностики.
  - `fetch-adapter.ts` — вызов серверных действий через `fetch`:
    - POST JSON-payload;
    - базовая обработка ошибок HTTP.
  - `ssr-adapter.ts` — обёртка для SSR HTML:
    - генерация полного HTML-документа с `<!doctype html>`, `<html lang="ru">`, `<meta charset="utf-8">`.
  - `router-adapter.ts` — простой History-роутер:
    - навигация через `history.pushState`;
    - генерация события `popstate` для подписчиков.
- Точка входа `src/index.ts` с переэкспортом ключевых адаптеров.
- README `packages/runtime-client/README.md` и тест-заглушка для CI.

#### Серверный адаптер для Node.js — `@warog/server-adapter-node`

- Добавлен Node.js-адаптер:
  - Экспорт `handler(req, res)` (формат Express-подобного хэндлера).
  - Использование `renderToString` из клиентского рантайма для генерации SSR HTML.
  - Корректная установка HTTP-заголовков и кодировки.
- Базовый `tsconfig.json`, README и тест-заглушки.

#### Примитивные компоненты — `@warog/components`

- Введён пакет компонентов для серверного рендеринга:
  - `Button`:
    - поддерживает пропсы `label` и `variant` (`primary` | `ghost`);
    - генерирует HTML-кнопку с CSS-классами `wg-btn`, `wg-btn-primary` / `wg-btn-ghost`.
- Пакетная точка входа `src/index.ts`.
- README и тест-заглушки для интеграции с CI.

#### Пример приложения — `examples/hello-warog`

- Добавлен демонстрационный пример:
  - Node.js HTTP-сервер (`server.cjs`), отдающий статический HTML:
    - документ с заголовком `Hello Warog`;
    - корневой контейнер `#app` с приветственным текстом.
  - `package.json` со скриптом `dev` для быстрого запуска.
  - Отдельный `README.md` на русском с инструкцией по запуску.

#### Инфраструктура и утилиты для разработки

- Каталог `tooling/dev-utils/scripts/` со вспомогательными скриптами:
  - `bootstrap.sh` — установка зависимостей проекта (`pnpm install`);
  - `build-all.sh` — сборка всех пакетов (`pnpm -r --filter ./packages... run build`);
  - `test-all.sh` — запуск тестов всех пакетов;
  - `clean.sh` — очистка артефактов сборки (`dist`, `coverage`);
  - `release.sh` — заготовка для релизного скрипта (подготовка версии v1.0.0).
- Все скрипты сделаны исполняемыми и пригодны для использования в CI/CD.

#### CI/CD и качество кода

- Добавлен базовый GitHub Actions workflow: `.github/workflows/ci.yml`:
  - запуск при `push` и `pull_request` в ветки `main` и `master`;
  - установка Node.js (v20) и `pnpm`;
  - `pnpm install`, `pnpm build`, `pnpm test`.
- Единые правила форматирования и линтинга:
  - `.eslintrc.cjs` — базовая конфигурация ESLint для TypeScript;
  - `.prettierrc` — настройки Prettier;
  - `.editorconfig` — унификация форматирования между редакторами.
- Общий `tsconfig.base.json` для всех TypeScript-пакетов.

### Изменено

- Не применимо — версия **1.0.0** является первым публичным релизом, все возможности добавлены впервые.

### Исправлено

- Не применимо — начальный стабильный релиз без зарегистрированных багов.

### Удалено

- Не применимо — в рамках первоначального релиза ничего не удалялось.

---

## История версий

- **1.0.0** — первый публичный релиз Warog: базовое ядро, компилятор-заготовка, клиентский и серверный адаптеры, примитивные компоненты и пример приложения.
